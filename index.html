<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giữ Chuỗi Cá Nhân</title>
    <style>
        body { text-align: center; font-family: Arial, sans-serif; background: #121212; color: white; }
        .hidden { display: none; }
        .button {
            padding: 12px 24px; 
            margin: 10px; 
            border: none; 
            border-radius: 10px; 
            font-size: 18px; 
            cursor: pointer; 
            transition: 0.3s;
        }
        .button:hover { opacity: 0.8; }
        .profile {
            border: 2px solid white; 
            padding: 20px; 
            width: 300px; 
            margin: auto; 
            border-radius: 15px;
        }
        .badge { font-size: 20px; margin: 5px; }
        .habit { background: #ff9800; color: white; }
        .love { background: #e91e63; color: white; }
        .study { background: #3f51b5; color: white; }
        .fitness { background: #4caf50; color: white; }
        .creative { background: #9c27b0; color: white; }
    </style>
</head>
<body>
    <h1>🔥 GIỮ CHUỖI CÁ NHÂN 🔥</h1>
    <button id="startButton" class="button habit">Giữ Chuỗi</button>

    <div id="habitSelection" class="hidden">
        <h2>Chọn loại chuỗi:</h2>
        <button class="habit-type button habit" data-type="habit">Thói Quen 🛠️</button>
        <button class="habit-type button love" data-type="love">Ngày Yêu ❤️</button>
        <button class="habit-type button study" data-type="study">Học Tập 📚</button>
        <button class="habit-type button fitness" data-type="fitness">Tập Thể Dục 🏋️</button>
        <button class="habit-type button creative" data-type="creative">Sáng Tạo 🎨</button>
    </div>

    <div id="dateSelection" class="hidden">
        <h2>Nhập thông tin cá nhân:</h2>
        <input type="text" id="username" placeholder="Tên của bạn"><br>
        <input type="date" id="startDate"><br>
        <div id="partnerSection" class="hidden">
            <input type="text" id="partnerName" placeholder="Tên người yêu">
        </div>
        <button id="saveData" class="button habit">Bắt Đầu</button>
    </div>

    <div id="profile" class="hidden">
        <h2>👤 Thông Tin Cá Nhân</h2>
        <div class="profile">
            <p><strong>Tên:</strong> <span id="profileName"></span></p>
            <p><strong>Loại Chuỗi:</strong> <span id="profileType"></span></p>
            <p><strong>Ngày Bắt Đầu:</strong> <span id="profileStartDate"></span></p>
            <p><strong>Ngày Đã Giữ:</strong> <span id="profileStreak"></span> ngày</p>
            <p><strong>Huy Hiệu:</strong> <span id="badges"></span></p>
        </div>
        <button id="miniGameBtn" class="button creative">🎮 Chơi Mini-Game</button>
    </div>

    <div id="miniGame" class="hidden">
        <h2 id="miniGameQuestion"></h2>
        <div id="miniGameChoices"></div>
    </div>

    <script>
        let selectedType = "";

        document.getElementById("startButton").addEventListener("click", () => {
            document.getElementById("habitSelection").classList.remove("hidden");
        });

        document.querySelectorAll(".habit-type").forEach(button => {
            button.addEventListener("click", function() {
                selectedType = this.dataset.type;
                document.getElementById("habitSelection").classList.add("hidden");
                document.getElementById("dateSelection").classList.remove("hidden");

                if (selectedType === "love") {
                    document.getElementById("partnerSection").classList.remove("hidden");
                } else {
                    document.getElementById("partnerSection").classList.add("hidden");
                }
            });
        });

        document.getElementById("saveData").addEventListener("click", function() {
            let username = document.getElementById("username").value.trim();
            let startDate = new Date(document.getElementById("startDate").value);
            let today = new Date();
            
            if (!username) {
                alert("Vui lòng nhập tên!");
                return;
            }
            
            if (localStorage.getItem(username)) {
                alert("Tên này đã được sử dụng!");
                return;
            }
            
            if (startDate > today) {
                alert("Không thể chọn ngày trong tương lai!");
                return;
            }

            let streakDays = Math.ceil((today - startDate) / (1000 * 60 * 60 * 24));
            
            localStorage.setItem(username, JSON.stringify({
                days: streakDays,
                type: selectedType,
                startDate: startDate.toLocaleDateString()
            }));

            showProfile(username, streakDays);
        });

        function showProfile(username, streakDays) {
            let data = JSON.parse(localStorage.getItem(username));
            
            document.getElementById("profileName").innerText = username;
            document.getElementById("profileType").innerText = data.type;
            document.getElementById("profileStartDate").innerText = data.startDate;
            document.getElementById("profileStreak").innerText = streakDays;
            document.getElementById("badges").innerHTML = getBadges(streakDays);
            
            document.getElementById("dateSelection").classList.add("hidden");
            document.getElementById("profile").classList.remove("hidden");
        }

        function getBadges(days) {
            let badges = "";
            if (days >= 30) badges += "🥉 ";
            if (days >= 100) badges += "🥈 ";
            if (days >= 365
                ) badges += "🥇 ";
            return badges || "Chưa có huy hiệu";
        }

        // 🎮 Mini-game đơn giản: Trả lời câu hỏi để nhận thưởng
        const questions = [
            { question: "2 + 2 = ?", choices: ["3", "4", "5"], answer: "4" },
            { question: "Thủ đô của Việt Nam là?", choices: ["HCM", "Hà Nội", "Đà Nẵng"], answer: "Hà Nội" },
            { question: "Màu của lá cây là?", choices: ["Xanh", "Đỏ", "Vàng"], answer: "Xanh" }
        ];

        document.getElementById("miniGameBtn").addEventListener("click", function () {
            document.getElementById("miniGame").classList.remove("hidden");
            let randomIndex = Math.floor(Math.random() * questions.length);
            let questionObj = questions[randomIndex];

            document.getElementById("miniGameQuestion").innerText = questionObj.question;
            let choicesDiv = document.getElementById("miniGameChoices");
            choicesDiv.innerHTML = "";

            questionObj.choices.forEach(choice => {
                let btn = document.createElement("button");
                btn.classList.add("button", "creative");
                btn.innerText = choice;
                btn.addEventListener("click", function () {
                    if (choice === questionObj.answer) {
                        alert("🎉 Chính xác! Bạn nhận được X2 chuỗi hôm nay!");
                    } else {
                        alert("❌ Sai rồi, thử lại nhé!");
                    }
                    document.getElementById("miniGame").classList.add("hidden");
                });
                choicesDiv.appendChild(btn);
            });
        });
    </script>
</body>
</html>
                
