<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Habit Tracker - Gi·ªØ L·ª≠a M·ªói Ng√†y</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; background-color: #000; color: white; }
        .container { width: 90%; max-width: 500px; margin: 50px auto; background: #111; padding: 20px; border-radius: 10px; box-shadow: 0px 0px 10px rgba(255, 255, 255, 0.1); }
        h1 { color: #ff5733; }
        button { background-color: #ff5733; color: white; border: none; padding: 10px; margin: 5px; cursor: pointer; border-radius: 5px; }
        button:hover { background-color: #e04e29; }
        .hidden { display: none; }
        .back-btn { background-color: gray; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üî• Chi·∫øn Th·∫ßn Gi·ªØ L·ª≠a üî•</h1>
        
        <p>Nh·∫≠p t√™n c·ªßa b·∫°n:</p>
        <input type="text" id="username" placeholder="T√™n c·ªßa b·∫°n">
        <input type="password" id="password" placeholder="M·∫≠t kh·∫©u">
        <p id="message" style="color: yellow;"></p>
        <button onclick="registerUser()">ƒêƒÉng k√Ω</button>
        <button onclick="loginUser()">ƒêƒÉng Nh·∫≠p</button>
        
        <div id="trackerMenu" class="hidden">
            <h2>Ch·ªçn Lo·∫°i Chu·ªói</h2>
            <button onclick="startTracking('habit')">Chu·ªói Th√≥i Quen</button>
            <button onclick="startTracking('love')">Chu·ªói Ng√†y Y√™u</button>
            <button onclick="startTracking('study')">Chu·ªói H·ªçc T·∫≠p</button>
            <button onclick="startTracking('fitness')">Chu·ªói Th·ªÉ D·ª•c</button>
            <button onclick="showProfile()">Th√¥ng Tin C√° Nh√¢n</button>
            <button class="back-btn" onclick="logout()">ƒêƒÉng Xu·∫•t</button>
        </div>

        <div id="trackerProgress" class="hidden">
            <h2>Chu·ªói c·ªßa b·∫°n:</h2>
            <p id="streakCount">0 ng√†y</p>
            <button onclick="increaseStreak()">Gi·ªØ Chu·ªói H√¥m Nay</button>
            <button onclick="startTask()">L√†m Nhi·ªám V·ª•</button>
            <button class="back-btn" onclick="goBackToMenu()">Quay l·∫°i Menu</button>
         <button class="back-btn" onclick="logoutUser()">ƒêƒÉng Xu·∫•t</button>
        </div>

        <div id="taskSection" class="hidden">
            <h2>L√†m Nhi·ªám V·ª•</h2>
            <p id="question"></p>
            <input type="text" id="answer" placeholder="Nh·∫≠p c√¢u tr·∫£ l·ªùi">
            <button onclick="checkAnswer()">Tr·∫£ L·ªùi</button>
            <p id="taskMessage"></p>
            <button class="back-btn" onclick="goBack('taskSection', 'trackerProgress')">Quay L·∫°i</button>
        </div>

        <div id="profileSection" class="hidden">
            <h2>Th√¥ng Tin C√° Nh√¢n</h2>
            <p id="profileInfo"></p>
            <button class="back-btn" onclick="goBack('profileSection', 'trackerMenu')">Quay L·∫°i</button>
        </div>
    </div>

    <script>
        let users = JSON.parse(localStorage.getItem("users")) || {};
        let currentUser = null;
        let currentQuestion = "";
        let currentAnswer = "";

        function registerUser() {
            let username = document.getElementById("username").value.trim();
            let password = document.getElementById("password").value.trim();
            if (!username || !password) {
                document.getElementById("message").innerText = "Nh·∫≠p ƒë·ªß th√¥ng tin!";
                return;
            }
            users[username] = { password, streaks: { habit: 0, love: 0, study: 0, fitness: 0 }, currentType: "" };
            localStorage.setItem("users", JSON.stringify(users));
            document.getElementById("message").innerText = "ƒêƒÉng k√Ω th√†nh c√¥ng!";
        }

        function loginUser() {
            let username = document.getElementById("username").value.trim();
            let password = document.getElementById("password").value.trim();
            if (users[username] && users[username].password === password) {
                currentUser = username;
                document.getElementById("message").innerText = "ƒêƒÉng nh·∫≠p th√†nh c√¥ng!";
                document.getElementById("trackerMenu").classList.remove("hidden");
                document.getElementById("username").style.display = "none";
document.getElementById("password").style.display = "none";
            } else {
                document.getElementById("message").innerText = "Sai t√™n ho·∫∑c m·∫≠t kh·∫©u!";
                document.getElementById("message").style.color = "red";
            }
        }

        function startTracking(type) {
    if (!currentUser) return;

    // ƒê·∫£m b·∫£o ng∆∞·ªùi d√πng ƒë√£ nh·∫≠p th√¥ng tin n·∫øu ch·ªçn "love"
    if (type === "love") {
        let loverName = prompt("Nh·∫≠p t√™n ng∆∞·ªùi y√™u c·ªßa b·∫°n:");
        if (!loverName || loverName.trim() === "") {
            alert("B·∫°n c·∫ßn nh·∫≠p t√™n ng∆∞·ªùi y√™u ƒë·ªÉ b·∫Øt ƒë·∫ßu Chu·ªói Ng√†y Y√™u!");
            return;
        }
        users[currentUser].lover = loverName.trim();
    }

    // C·∫≠p nh·∫≠t chu·ªói hi·ªán t·∫°i
    users[currentUser].currentType = type;
    localStorage.setItem("users", JSON.stringify(users));

    document.getElementById("trackerMenu").classList.add("hidden");  // ·∫®n menu
    document.getElementById("trackerProgress").classList.remove("hidden");  // Hi·ªán ph·∫ßn chu·ªói

    updateStreak();  // C·∫≠p nh·∫≠t hi·ªÉn th·ªã chu·ªói
}

        function increaseStreak() {
    if (!currentUser) return;
    let type = users[currentUser].currentType;
    if (!type) {
        alert("B·∫°n c·∫ßn ch·ªçn lo·∫°i chu·ªói tr∆∞·ªõc!");
        return;
    }
    users[currentUser].streaks[type]++;
    localStorage.setItem("users", JSON.stringify(users));
    updateStreak();
}

        function updateStreak() {
            let type = users[currentUser]?.currentType || "habit";
            document.getElementById("streakCount").innerText = users[currentUser]?.streaks[type] + " ng√†y";
        }

        function startTask() {
            let questions = [
                { q: "1 + 1 b·∫±ng m·∫•y?", a: "2" },
                { q: "M√†u c·ªßa l√° c√¢y l√† g√¨?", a: "xanh" },
                { q: "Th·ªß ƒë√¥ c·ªßa Vi·ªát Nam l√† g√¨?", a: "h√† n·ªôi" },
                { q: "M·ªôt con v·ªãt xo√® ra hai c√°i g√¨ ?", a:"c√°nh" },
                { q: "T√°c ph·∫©m T·∫Øt ƒê√®n l√† c·ªßa ai ? ", a:"Ng√¥ T·∫•t T·ªë"},
                { q: "Ng√†y u·ªëng bao nhi√™u l√≠t n∆∞·ªõc m·ªõi ƒë·ªß ?", a:"2 l√≠t "},
                { q: "CCMN l√† g√¨ !", a:"chu·∫©n c∆°m m·∫π n·∫•u"},
                { q: "ƒÇn th·ªãt ƒë∆∞·ªùng tƒÉng c√≥ tr∆∞·ªùng sinh b·∫•t t·ª≠ kh√¥ng?" , a:"kh√¥ng"},
                { q: " T√¥n Ng·ªô Kh√¥ng c√≥ bao nhi√™u ph√©p th·∫ßn th√¥ng?", a:"72 ph√©p "}
                
            ];
            let randomIndex = Math.floor(Math.random() * questions.length);
            currentQuestion = questions[randomIndex].q;
            currentAnswer = questions[randomIndex].a;
            document.getElementById("question").innerText = currentQuestion;
            document.getElementById("taskMessage").innerText = "";
            document.getElementById("taskSection").classList.remove("hidden");
            document.getElementById("trackerProgress").classList.add("hidden");
        }
function checkAnswer() {
    let userAnswer = document.getElementById("answer").value.trim().toLowerCase();
    let correctAnswer = currentAnswer.trim().toLowerCase();

    if (userAnswer === correctAnswer) {
        increaseStreak();
        document.getElementById("taskMessage").innerText = "üéâ ƒê√∫ng r·ªìi! B·∫°n ƒë∆∞·ª£c c·ªông 1 ng√†y chu·ªói!";
        setTimeout(() => {
            document.getElementById("answer").value = "";
            startTask();
        }, 1000);
    } else {
        document.getElementById("taskMessage").innerText = "‚ùå Sai r·ªìi! Th·ª≠ l·∫°i nh√©!";
        document.getElementById("answer").value = "";
        document.getElementById("answer").focus(); // Focus l·∫°i v√†o √¥ nh·∫≠p
    }
}
       
     function showProfile() {
    if (!currentUser) return;
    let userData = users[currentUser];

    let streaksText = Object.entries(userData.streaks)
        .map(([key, value]) => `${key.toUpperCase()}: ${value} ng√†y`)
        .join("<br>");

    let loverText = userData.lover ? `<br>üíñ Ng∆∞·ªùi y√™u: ${userData.lover}` : ""; // N·∫øu c√≥ ng∆∞·ªùi y√™u th√¨ hi·ªÉn th·ªã

    document.getElementById("profileInfo").innerHTML = `üë§ ${currentUser}<br>${streaksText}${loverText}`;
    
    document.getElementById("profileSection").classList.remove("hidden");
    document.getElementById("trackerMenu").classList.add("hidden");
}   
            

        function goBack(hideId, showId) {
            document.getElementById(hideId).classList.add("hidden");
            document.getElementById(showId).classList.remove("hidden");
        }
        function goBackToMenu() {
    // Reset tr·∫°ng th√°i chu·ªói khi quay l·∫°i menu
    users[currentUser].currentType = "";  // X√≥a chu·ªói hi·ªán t·∫°i
    localStorage.setItem("users", JSON.stringify(users));
    
    document.getElementById("trackerProgress").classList.add("hidden");  // ·∫®n ph·∫ßn chu·ªói hi·ªán t·∫°i
    document.getElementById("trackerMenu").classList.remove("hidden");  // Hi·ªán l·∫°i menu ch·ªçn chu·ªói

    // C·∫≠p nh·∫≠t l·∫°i th√¥ng tin chu·ªói
    updateStreak();
}


function logoutUser() {
    currentUser = null;
    document.getElementById("trackerMenu").classList.add("hidden");
    document.getElementById("trackerProgress").classList.add("hidden");
    document.getElementById("taskSection").classList.add("hidden");
    document.getElementById("profileSection").classList.add("hidden");
    
    document.getElementById("message").innerText = "B·∫°n ƒë√£ ƒëƒÉng xu·∫•t!";
    document.getElementById("username").value = "";
    document.getElementById("password").value = "";
}




        
    </script>
</body>
</html>
