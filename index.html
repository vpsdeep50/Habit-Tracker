<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giá»¯ Chuá»—i CÃ¡ NhÃ¢n</title>
    <style>
        body { text-align: center; font-family: Arial, sans-serif; background: #121212; color: white; }
        .hidden { display: none; }
        .button {
            padding: 12px 24px; 
            margin: 10px; 
            border: none; 
            border-radius: 10px; 
            font-size: 18px; 
            cursor: pointer; 
            transition: 0.3s;
        }
        .button:hover { opacity: 0.8; }
        .profile {
            border: 2px solid white; 
            padding: 20px; 
            width: 300px; 
            margin: auto; 
            border-radius: 15px;
        }
        .badge { font-size: 20px; margin: 5px; }
        .habit { background: #ff9800; color: white; }
        .love { background: #e91e63; color: white; }
        .study { background: #3f51b5; color: white; }
        .fitness { background: #4caf50; color: white; }
        .creative { background: #9c27b0; color: white; }
    </style>
</head>
<body>
    <h1>ğŸ”¥ GIá»® CHUá»–I CÃ NHÃ‚N ğŸ”¥</h1>
    <button id="startButton" class="button habit">Giá»¯ Chuá»—i</button>

    <div id="habitSelection" class="hidden">
        <h2>Chá»n loáº¡i chuá»—i:</h2>
        <button class="habit-type button habit" data-type="habit">ThÃ³i Quen ğŸ› ï¸</button>
        <button class="habit-type button love" data-type="love">NgÃ y YÃªu â¤ï¸</button>
        <button class="habit-type button study" data-type="study">Há»c Táº­p ğŸ“š</button>
        <button class="habit-type button fitness" data-type="fitness">Táº­p Thá»ƒ Dá»¥c ğŸ‹ï¸</button>
        <button class="habit-type button creative" data-type="creative">SÃ¡ng Táº¡o ğŸ¨</button>
    </div>

    <div id="dateSelection" class="hidden">
        <h2>Nháº­p thÃ´ng tin cÃ¡ nhÃ¢n:</h2>
        <input type="text" id="username" placeholder="TÃªn cá»§a báº¡n"><br>
        <input type="date" id="startDate"><br>
        <div id="partnerSection" class="hidden">
            <input type="text" id="partnerName" placeholder="TÃªn ngÆ°á»i yÃªu">
        </div>
        <button id="saveData" class="button habit">Báº¯t Äáº§u</button>
    </div>

    <div id="profile" class="hidden">
        <h2>ğŸ‘¤ ThÃ´ng Tin CÃ¡ NhÃ¢n</h2>
        <div class="profile">
            <p><strong>TÃªn:</strong> <span id="profileName"></span></p>
            <p><strong>Loáº¡i Chuá»—i:</strong> <span id="profileType"></span></p>
            <p><strong>NgÃ y Báº¯t Äáº§u:</strong> <span id="profileStartDate"></span></p>
            <p><strong>NgÃ y ÄÃ£ Giá»¯:</strong> <span id="profileStreak"></span> ngÃ y</p>
            <p><strong>Huy Hiá»‡u:</strong> <span id="badges"></span></p>
        </div>
        <button id="miniGameBtn" class="button creative">ğŸ® ChÆ¡i Mini-Game</button>
    </div>

    <div id="miniGame" class="hidden">
        <h2 id="miniGameQuestion"></h2>
        <div id="miniGameChoices"></div>
    </div>

    <script>
        let selectedType = "";

        document.getElementById("startButton").addEventListener("click", () => {
            document.getElementById("habitSelection").classList.remove("hidden");
        });

        document.querySelectorAll(".habit-type").forEach(button => {
            button.addEventListener("click", function() {
                selectedType = this.dataset.type;
                document.getElementById("habitSelection").classList.add("hidden");
                document.getElementById("dateSelection").classList.remove("hidden");

                if (selectedType === "love") {
                    document.getElementById("partnerSection").classList.remove("hidden");
                } else {
                    document.getElementById("partnerSection").classList.add("hidden");
                }
            });
        });

        document.getElementById("saveData").addEventListener("click", function() {
            let username = document.getElementById("username").value.trim();
            let startDate = new Date(document.getElementById("startDate").value);
            let today = new Date();
            
            if (!username) {
                alert("Vui lÃ²ng nháº­p tÃªn!");
                return;
            }
            
            if (localStorage.getItem(username)) {
                alert("TÃªn nÃ y Ä‘Ã£ Ä‘Æ°á»£c sá»­ dá»¥ng!");
                return;
            }
            
            if (startDate > today) {
                alert("KhÃ´ng thá»ƒ chá»n ngÃ y trong tÆ°Æ¡ng lai!");
                return;
            }

            let streakDays = Math.ceil((today - startDate) / (1000 * 60 * 60 * 24));
            
            localStorage.setItem(username, JSON.stringify({
                days: streakDays,
                type: selectedType,
                startDate: startDate.toLocaleDateString()
            }));

            showProfile(username, streakDays);
        });

        function showProfile(username, streakDays) {
            let data = JSON.parse(localStorage.getItem(username));
            
            document.getElementById("profileName").innerText = username;
            document.getElementById("profileType").innerText = data.type;
            document.getElementById("profileStartDate").innerText = data.startDate;
            document.getElementById("profileStreak").innerText = streakDays;
            document.getElementById("badges").innerHTML = getBadges(streakDays);
            
            document.getElementById("dateSelection").classList.add("hidden");
            document.getElementById("profile").classList.remove("hidden");
        }

        function getBadges(days) {
            let badges = "";
            if (days >= 30) badges += "ğŸ¥‰ ";
            if (days >= 100) badges += "ğŸ¥ˆ ";
            if (days >= 365
                ) badges += "ğŸ¥‡ ";
            return badges || "ChÆ°a cÃ³ huy hiá»‡u";
        }

        // ğŸ® Mini-game Ä‘Æ¡n giáº£n: Tráº£ lá»i cÃ¢u há»i Ä‘á»ƒ nháº­n thÆ°á»Ÿng
        const questions = [
            { question: "2 + 2 = ?", choices: ["3", "4", "5"], answer: "4" },
            { question: "Thá»§ Ä‘Ã´ cá»§a Viá»‡t Nam lÃ ?", choices: ["HCM", "HÃ  Ná»™i", "ÄÃ  Náºµng"], answer: "HÃ  Ná»™i" },
            { question: "MÃ u cá»§a lÃ¡ cÃ¢y lÃ ?", choices: ["Xanh", "Äá»", "VÃ ng"], answer: "Xanh" }
        ];

        document.getElementById("miniGameBtn").addEventListener("click", function () {
            document.getElementById("miniGame").classList.remove("hidden");
            let randomIndex = Math.floor(Math.random() * questions.length);
            let questionObj = questions[randomIndex];

            document.getElementById("miniGameQuestion").innerText = questionObj.question;
            let choicesDiv = document.getElementById("miniGameChoices");
            choicesDiv.innerHTML = "";

            questionObj.choices.forEach(choice => {
                let btn = document.createElement("button");
                btn.classList.add("button", "creative");
                btn.innerText = choice;
                btn.addEventListener("click", function () {
                    if (choice === questionObj.answer) {
                        alert("ğŸ‰ ChÃ­nh xÃ¡c! Báº¡n nháº­n Ä‘Æ°á»£c X2 chuá»—i hÃ´m nay!");
                    } else {
                        alert("âŒ Sai rá»“i, thá»­ láº¡i nhÃ©!");
                    }
                    document.getElementById("miniGame").classList.add("hidden");
                });
                choicesDiv.appendChild(btn);
            });
        });
    </script>
</body>
</html>
                
